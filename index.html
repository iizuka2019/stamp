<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>スタンプラリー UI with Firebase Auth</title>
  <!-- LeafletのCSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <!-- MarkerCluster CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
  <!-- 独自のスタイル -->
  <link rel="stylesheet" href="styles.css">
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <header>
    <button id="menuToggle" onclick="openMenu()">☰</button>
    <button id="locateBtn" onclick="locateUser()">現在地表示</button>
    <h1>スタンプラリー</h1>
    <p>全国の城・城址を巡ってスタンプを集めよう！</p>
    <div id="loginStatus" style="margin-top:10px;">未ログイン</div>
  </header>

  <!-- ハンバーガーメニュー -->
  <div id="hamburgerMenu">
    <button id="menuClose" onclick="closeMenu()">×</button>
    <h2>ユーザー認証</h2>
    <div id="authForm" class="auth-form">
      <input type="text" id="signupName" placeholder="氏名（新規登録）">
      <input type="email" id="signupEmail" placeholder="メールアドレス（新規登録）">
      <input type="password" id="signupPassword" placeholder="パスワード（新規登録）">
      <button onclick="新規登録()">新規登録</button>
      <br>
      <input type="email" id="loginEmail" placeholder="メールアドレス（ログイン）">
      <input type="password" id="loginPassword" placeholder="パスワード（ログイン）">
      <button onclick="ログイン()">ログイン</button>
    </div>
    <button id="logoutBtn" onclick="ログアウト()" style="display:none;">ログアウト</button>
    <!-- ランキング表示 -->
    <div id="rankingSection">
      <h2>ランキング</h2>
      <div id="rankingList">読み込み中…</div>
    </div>
  </div>

  <div id="map"></div>

  <div class="container">
    <div id="pointsDisplay">総ポイント: 0</div>
    <h2>スタンプカード</h2>
    <div id="stampCard">
      <!-- 50km圏内の城のみ表示 -->
    </div>
  </div>

  <footer>リリース更新日: 2025-03-14 17:27:00</footer>

  <!-- LeafletとMarkerClusterのJS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-storage-compat.js"></script>
  <!-- アプリケーションロジック -->
  <script src="app.js"></script>
</body>
</html>
